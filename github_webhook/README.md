# Github Webhook worker

This shows how to kick off a worker from a webhook. This example uses Github's Service Hooks.

## Getting started

- Be sure you've followed the base [getting started instructions on the top level README](https://github.com/iron-io/iron-worker-examples)
- You should have a github repository for testing purposes
- Fill the `config.json` file with the actual information. In the 'owner' field enter your github user name; in the "repo" field enter the repository name; in the "path" field enter a relative pass to your executable file in github

## Downloading a code from github and running in worker

#### Use existing iron docker image (for quick example)

- Register your master worker with Iron:
```sh
iron register -config-file config.json --name github_webhook iron/examples:webhook_github_ruby
```

To build your own image with your code, you have to install the dependencies for your code (see step below), build docker image and push to your docker hub account

#### Or get gems, zip package and upload worker

- Install the dependencies for your code:
```sh
docker run --rm -v "$PWD":/worker -w /worker iron/ruby:dev bundle install --standalone --clean
```
- Package and upload the worker if it hasn't been uploaded yet, from command line:
```sh
zip -r webhook.zip .
iron worker upload --name github_webhook -config-file config.json --zip webhook.zip iron/ruby ruby webhook.rb
```

## Configuring IronWorker webhook in github repo

- Navigate to the "Codes" tab in our dashboard, select the "github_webhook" code you've uploaded and you will be able to see its webhook URL that was automatically generated by our system.
- Go to Github Service Hooks: github.com -> repository -> Settings -> Webhooks
- Add the IronWorker webhook URL

## Run a code from github in IronWorker

Push any changes to your github repo and enjoy seeing how IronWorker executes your code!